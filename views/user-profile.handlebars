<<<<<<< HEAD
<header>
    <!--added bootstrap navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand navbar1">
                <!--I added my name with a my-name class for css styling-->
                <strong class="my-name">Coffee House</strong>
            </a>
            <!--added the links to the navbar buttons About, Portfolio and Contact-->

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <button class="btn btn-secondary dropdown-toggle" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">coffee houses
          <div id="drop-dwn" class="dropdown-menu" aria-labelledby="coffeeshops">
          <a class="dropdown-item" href="/shop/1">Coffee Spot ☕</a>
          <a class="dropdown-item" href="/shop/2"> Bloggin Coffee ☕</a>
          <a class="dropdown-item" href="/shop/3">No Doze Cafe ☕</a>
          <a class="dropdown-item" href="/shop/4">Finest Brew ☕</a>
          <a class="dropdown-item" href="/shop/5">Java Joe ☕</a>
        </div>
        </button>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <strong>Homepage</strong>
                        </a>
                    </li>
                    <li class="nav-item dropdown"></li>
                    <li class="nav-item">
                        {{!-- <a class="nav-link spacing" href="coffeehouse.handlebars">
                            <strong>Coffee House</strong>
                        </a> --}}
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

=======
>>>>>>> f5e5442fde4ef92a52fccd647a6262d224cdc08d
<!--added a my-container class-->
<div class="container">
    <!--Created the proper rows and columns for About Me-->
    <div class="row d-flex justify-content-center" id="profilebox">
        <h1>{{profile.name}}</h1>
    </div>

    <!--added a thematic break for light asthetics and spacing-->
    <hr>
    <!--Created the rows and columns for profile image and the About Me text-->


    <div class="row">
        <div class="col-md-2">
            <img src="{{#if profile.imgURL}}{{profile.imgURL}}{{else}}http://www.thestoryof.org/wp-content/uploads/2016/09/profile-placeholder.jpg{{/if}}"
                class="profile-img img-fluid mt-4 responsive image" alt="profile image">

        </div>
        <div class="col-md-10">
            <!--*change LI to my About Me*-->
            <p class="bio">
                {{profile.bio}}
            </p>
        </div>
        <div>
            <p>Favorite coffee:{{profile.favCoffee}}</p>
            <p>Favorite coffee shop:{{profile.favCoffeeShop}}</p>
        </div>
    </div>
</div>
<div class="container">
    <div class="reviews">
        {{#each Reviews}}
            <div class="card mt-2">
                <div class="card-body">
                    <h2>{{comment}}</h2>
                    <div class="rating" data-data="{{rating}}">
                    </div>
                    <a href="/profile/{{UserId}}" class="user-link" data-data="{{UserId}}">Anonymous</a>
                </div>
            </div>
        {{/each}}
    </div>
</div>

<!--added a bootstrap sticky footer with an additional class for css styling-->
<footer class="footer mt-auto py-3">
    <div class="container">
        <span class="text-muted">Copyright ©</span>
    </div>
</footer>
<script>
    let knownUsers = {};
    async function getUser(id){
        let loggedIn = false;
        {{#if user}}
            loggedIn = true;
        {{/if}}
        if(loggedIn){
            if(typeof knownUsers['u_'+id] === 'undefined'){
                knownUsers['u_'+id] = await $.ajax({
                    method:'GET',
                    url:'/api/user-profile/'+id
                });
                return knownUsers['u_'+id];
            } else {
                return knownUsers['u_'+id];
            }

        } else {
            return {
                name: 'Anonymous'
            }
        }
    }
    $('.user-link').each(function () {
        getUser($(this).data('data')).then((user)=>{
            console.log(user);
            $(this).html(user.name);
        })

    });
    $('.rating').each(function(){
        let rating = $(this).data('data');
        console.log('star: '+rating);
        for(let i = 0; i< 5; i++){
            if(Number(rating)>i){
                $(this).html($(this).html()+'<i class="fa fa-star fa-2x"></i>');
            } else {
                $(this).html($(this).html()+'<i class="fa fa-star-o fa-2x"></i>');
            }

            console.log('star: '+rating)
        }

    });
</script>
         